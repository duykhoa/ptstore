<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/google-chart/google-chart.html">

<dom-module id="pt-story-type-chart">
  <template>
    <style is="custom-style">
      google-chart {
        width: 400px;
      }
    </style>

    <google-chart
      type="pie"
      data="{{rowsData}}"
      options="{{options}}"
    ></google-chart>
  </template>

  <script>
    class PtStoryTypeChart extends Polymer.Element {
      static get is() { return "pt-story-type-chart"; }
      static get properties() {
        return {
          bugCount: { type: Number },
          featureCount: { type: Number },
          choreCount: { type: Number },
          rowsData: {
            type: Array,
            computed: "_constructRowsData(bugCount, featureCount, choreCount)"
          },

          options: {
            type: Object,
            value: {
              fontName: "Roboto Mono",
              chartArea: {
                left: 10
              },
              is3D: true,
              colors: [
                "#0f9d58", "#f44336", "#90caf9" 
              ]
            }
          }
        }
      }

      _constructRowsData(bugCount, featureCount, choreCount) {
        return [
          ["Story Type", "Quantity"],
          ["Feature", featureCount],
          ["Bug", bugCount],
          ["Chore", choreCount]
        ];
      }
    }

    window.customElements.define(PtStoryTypeChart.is, PtStoryTypeChart);
  </script>
</dom-module>
